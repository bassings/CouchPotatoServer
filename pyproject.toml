[tool.ruff]
target-version = "py310"
line-length = 160

exclude = [
    "libs/",
    "couchpotato/lib/",
    ".git",
    "__pycache__",
    "build/",
    "dist/",
    "*.egg-info",
]

[tool.ruff.lint]
select = ["E", "F", "W", "UP", "B"]

ignore = [
    # Bare except — legacy code uses these everywhere
    "E722",
    # Broad exception caught — too noisy for legacy code
    "BLE001",
    # Do not use mutable data structures for argument defaults — common pattern in legacy
    "B006",
    # Loop control variable not used — common in legacy
    "B007",
    # No explicit stacklevel in warnings.warn — too noisy
    "B028",
    # Star-arg unpacking after keyword — legacy patterns
    "B026",
    # f-string in exception — not worth bulk-fixing
    "UP031",
    "UP032",
    # Open with explicit encoding — too many to fix at once
    "UP015",
    # Unnecessary open mode parameters — noisy
    "UP018",
    # Line too long — handled by line-length setting, but some will still be too long
    "E501",
    # Module imported but unused — needed for __init__.py re-exports
    "F401",
    # Undefined name — too many false positives with dynamic imports
    "F821",
    # Local variable assigned but never used
    "F841",
    # Ambiguous variable name
    "E741",
    # Multiple statements on one line — legacy code style
    "E701",
    # Indentation contains tabs — legacy mixed indentation
    "W191",
    # Module level import not at top of file — legacy code structure
    "E402",
    # Comparison to None (use is/is not) — could change behaviour with __eq__
    "E711",
    # Not-in test — could change behaviour
    "E713",
    # Do not assign a lambda expression — legacy style
    "E731",
    # Comparison to True/False — could change behaviour
    "E712",
    # Function variable does not bind loop variable — legacy closures
    "B023",
    # Use is/is not for comparisons — too many to fix safely
    "F632",
    # Return in finally — legacy patterns
    "B012",
    # Unreachable code — legacy patterns
    "B020",
    # Redefined unused name — legacy
    "F811",
    # Unnecessary call to str/bytes — legacy
    "B005",
    # Trailing whitespace
    "W291",
    # No newline at end of file
    "W292",
    # Trailing semicolons
    "E703",
    # f-string without placeholders
    "F541",
    # Deprecated typing imports (Dict, List, etc.) — bulk change, do later
    "UP035",
    # Use implicit references for positional format fields
    "UP030",
    # Version block outdated for minimum Python version
    "UP036",
    # zip() without strict= — legacy code
    "B905",
    # Useless expression — legacy patterns
    "B018",
    # raise without from in except — legacy
    "B904",
    # Duplicate exception in try-except
    "B025",
    # Function call in default argument (e.g. Depends()) — FastAPI pattern
    "B008",
    # Multiple imports on one line
    "E401",
    # Not is test — minor style
    "E714",
    # Unnecessary __init__ super call
    "UP009",
]

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401", "F403"]
"tests/*" = ["B", "UP"]
